<%- include('../Shared/Head.ejs') %>
    <title>Online Shop | Admin</title>
</head>

<body>
    <%- include('../Shared/Navbar.ejs') %>

    <div class="container">

        <div class="admin-navbar" >
            <a href=""> <button>Create Product</button></a>
           <a href=""><button>My Product</button></a>
        </div>

        <div class="admin-content">

            <form enctype="multipart/form-data">
                <div>
                    <label for="">name</label>
                    <input class="product-name" type="text" name >
                </div>

                <div>
                    <label for="">price</label>
                    <input class="product-price" type="text">
                </div>

                <div>
                    <label for="">description</label>
                    <input class="product-description" type="text">
                </div>

                <div>
                    <label for="">image</label>
                    <input class="product-image" type="file">
                </div>

                <button type="submit" >Add</button>
            </form>

        </div>

    </div>
</body>

<script>

    document.querySelector('form').addEventListener('submit', async (ev) => {
        ev.preventDefault();

        const name_input = document.querySelector('.product-name').value;
        const price_input = document.querySelector('.product-price').value;
        const description_input = document.querySelector('.product-description').value;
        const image_input = document.querySelector('.product-image').files[0];
        
        const form_data = new FormData();

        form_data.append('name', name_input);
        form_data.append('price', price_input);
        form_data.append('description', description_input);
        form_data.append('image_url', image_input);

        const res = await fetch(`http://localhost:11111/admin/add-product`, {
            method: "POST",
            body: form_data,
        })

        const obj = await res.json();

        console.log(obj);
    })
    
</script>

<style>
     .container {
        width: 90%;
        margin: 1rem auto;
        border: 1px solid black;
        padding: 1rem;
    }

    .admin-navbar {
        display: flex;
        justify-self: center;
        gap: 1rem;
    }

    form {
        border: 1px solid black;
        width: 70%;
        padding: 1rem;
        margin-inline: auto;
    }

    button {
        padding: 0.5rem;
    }

    input {
        width: 100%;
    }

</style>